(function(g){var window=this;'use strict';var ej=function(b,R){if(!Number.isFinite(b))return String(b);b=String(b);var h=b.indexOf(".");h===-1&&(h=b.length);var K=b[0]==="-"?"-":"";K&&(b=b.substring(1));return K+(0,g.xSx)("0",Math.max(0,R-h))+b},Q6=function(b){typeof b==="number"?(this.date=hkB(b,0,1),O_(this,1)):g.Ut(b)?(this.date=hkB(b.getFullYear(),b.getMonth(),b.getDate()),O_(this,b.getDate())):(this.date=new Date(g.J3()),b=this.date.getDate(),this.date.setHours(0),this.date.setMinutes(0),this.date.setSeconds(0),this.date.setMilliseconds(0),
O_(this,b))},hkB=function(b,R,h){R=new Date(b,R,h);
b>=0&&b<100&&R.setFullYear(R.getFullYear()-1900);return R},O_=function(b,R){b.getDate()!=R&&b.date.setUTCHours(b.date.getUTCHours()+(b.getDate()<R?1:-1))},xe=function(b){g.S4.call(this,{K:"div",
VX:[{K:"button",tO:["ytp-offline-slate-button","ytp-button"],VX:[{K:"div",IH:"ytp-offline-slate-button-icon",O9:"{{icon}}"},{K:"div",IH:"ytp-offline-slate-button-text",O9:"{{text}}"}]}]});this.nR=b;this.G=this.toggleButtonRenderer=null;(this.Y=this.xZ("ytp-offline-slate-button"))&&this.T6(this.Y,"click",this.V);this.hide()},K1x=function(b,R){!b.toggleButtonRenderer&&R&&R.toggleButtonRenderer?b.toggleButtonRenderer=R.toggleButtonRenderer:R&&R.toggleButtonRenderer||(b.toggleButtonRenderer=null);
m0(b)},m0=function(b){if(b.toggleButtonRenderer){var R=b.toggleButtonRenderer;
if(R.isToggled){var h=R.toggledText?g.NU(R.toggledText):"";b.update({text:h,icon:syK(R.toggledIcon)})}else h=R.defaultText?g.NU(R.defaultText):"",b.update({text:h,icon:syK(R.defaultIcon)});b.show()}else b.hide()},pRw=function(b,R){var h=g.m(R,$mx),K=g.m(R,I7B);
if(R&&(h||K)){if(h){var I=h;var N="notification/add_upcoming_event_reminder"}else K&&(I=K,N="notification/remove_upcoming_event_reminder");N&&I&&I.params&&NbT(b,N,I.params)}},NbT=function(b,R,h){b.G||(b.G=new g.rI(b.nR.W().Dq));
var K={context:g.cL(b.G.config_||g.e5())};g.b2()&&(K.context.clientScreenNonce=g.b2());K.params=h;g.wI(b.G,R,K,{timeout:5E3,onError:function(){l7K(b)},
onTimeout:function(){l7K(b)}})},l7K=function(b){b.toggleButtonRenderer&&(b.toggleButtonRenderer.isToggled=!b.toggleButtonRenderer.isToggled,m0(b))},syK=function(b){if(!b)return null;
switch(b.iconType){case "NOTIFICATIONS":return{K:"svg",Zr:{fill:"#fff",height:"24px",viewBox:"0 0 24 24",width:"24px"},VX:[{K:"path",Zr:{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"}}]};case "NOTIFICATIONS_NONE":return{K:"svg",Zr:{fill:"#fff",height:"24px",viewBox:"0 0 24 24",width:"24px"},VX:[{K:"path",Zr:{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"}}]};
case "NOTIFICATIONS_ACTIVE":return{K:"svg",Zr:{fill:"#fff",height:"24px",viewBox:"0 0 24 24",width:"24px"},VX:[{K:"path",Zr:{d:"M7.58 4.08L6.15 2.65C3.75 4.48 2.17 7.3 2.03 10.5h2c.15-2.65 1.51-4.97 3.55-6.42zm12.39 6.42h2c-.15-3.2-1.73-6.02-4.12-7.85l-1.42 1.43c2.02 1.45 3.39 3.77 3.54 6.42zM18 11c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2v-5zm-6 11c.14 0 .27-.01.4-.04.65-.14 1.18-.58 1.44-1.18.1-.24.15-.5.15-.78h-4c.01 1.1.9 2 2.01 2z"}}]};
default:return null}},Pf=function(b){g.S4.call(this,{K:"div",
IH:"ytp-offline-slate",VX:[{K:"div",IH:"ytp-offline-slate-background"},{K:"div",IH:"ytp-offline-slate-bar",VX:[{K:"span",IH:"ytp-offline-slate-icon",VX:[{K:"svg",Zr:{fill:"#fff",height:"100%",viewBox:"0 0 24 24",width:"100%"},VX:[{K:"path",Zr:{d:"M16.94 6.91l-1.41 1.45c.9.94 1.46 2.22 1.46 3.64s-.56 2.71-1.46 3.64l1.41 1.45c1.27-1.31 2.05-3.11 2.05-5.09s-.78-3.79-2.05-5.09zM19.77 4l-1.41 1.45C19.98 7.13 21 9.44 21 12.01c0 2.57-1.01 4.88-2.64 6.54l1.4 1.45c2.01-2.04 3.24-4.87 3.24-7.99 0-3.13-1.23-5.96-3.23-8.01zM7.06 6.91c-1.27 1.3-2.05 3.1-2.05 5.09s.78 3.79 2.05 5.09l1.41-1.45c-.9-.94-1.46-2.22-1.46-3.64s.56-2.71 1.46-3.64L7.06 6.91zM5.64 5.45L4.24 4C2.23 6.04 1 8.87 1 11.99c0 3.13 1.23 5.96 3.23 8.01l1.41-1.45C4.02 16.87 3 14.56 3 11.99s1.01-4.88 2.64-6.54z"}},
{K:"circle",Zr:{cx:"12",cy:"12",r:"3"}}]}]},{K:"span",IH:"ytp-offline-slate-messages",VX:[{K:"div",IH:"ytp-offline-slate-main-text",Zr:{"aria-label":"{{label}}"},O9:"{{mainText}}"},{K:"div",IH:"ytp-offline-slate-subtitle-text",O9:"{{subtitleText}}"}]},{K:"span",IH:"ytp-offline-slate-buttons"}]},{K:"button",tO:["ytp-offline-slate-close-button","ytp-button"],VX:[g.Y2()]},{K:"button",tO:["ytp-offline-slate-open-button","ytp-button"],VX:[{K:"svg",Zr:{height:"100%",version:"1.1",viewBox:"0 0 32 32",width:"100%"},
VX:[{K:"path",Zr:{d:"M 19.41,20.09 14.83,15.5 19.41,10.91 18,9.5 l -6,6 6,6 z",fill:"#fff"}}]}]}]});var R=this;this.api=b;this.G=this.Y=null;this.background=this.xZ("ytp-offline-slate-background");this.V=this.xZ("ytp-offline-slate-bar");this.B=new g.a_(function(){g.jM(R.V,"ytp-offline-slate-bar-fade")},15E3);
this.N=!1;this.S=new g.a_(function(){g.jM(R.element,"ytp-offline-slate-collapsed")},15E3);
g.Q(this,this.S);g.Q(this,this.B);this.countdownTimer=new g.a_(this.Jn,1E3,this);this.T6(b,"presentingplayerstatechange",this.rS);this.T6(b,"livestatedata",this.Hr);this.T6(this.xZ("ytp-offline-slate-close-button"),"click",function(){g.jM(R.element,"ytp-offline-slate-collapsed")});
this.T6(this.xZ("ytp-offline-slate-open-button"),"click",function(){g.i6(R.element,"ytp-offline-slate-collapsed")});
this.hide();b=this.getVideoData();b.getPlayerResponse()&&(b=b.getPlayerResponse().playabilityStatus)&&this.Hr(b);b=this.api.getPresentingPlayerType()===8&&!this.getVideoData().Os;var h=this.api.getPresentingPlayerType()===8;g.zU(this.element,"ytp-offline-slate-premiere-trailer",b);g.zU(this.element,"ytp-offline-slate-hide-background",h)},ZD=function(b,R,h){if(R){var K=R.subtitleText!=null?g.NU(R.subtitleText):"";
h=h?h:R.mainText!=null?g.NU(R.mainText):"";var I,N,p,a;R=(a=(I=R.mainText)==null?void 0:(N=I.accessibility)==null?void 0:(p=N.accessibilityData)==null?void 0:p.label)!=null?a:h;b.update({mainText:h,subtitleText:K,label:R});g.zU(b.element,"ytp-offline-slate-single-text-line",!K);g.zU(b.V,"ytp-offline-slate-bar-hidden",!h&&!K)}},cf=function(b,R){var h=(0,g.P)();
this.module="heartbeat";this.trigger=b;this.G=R;this.X=h},Xe=function(b){g.XK.call(this,b);
var R=this;this.N=!1;this.j=0;this.S=!1;this.Y=new g.a_(function(){a7w(R)},0);
this.G=this.heartbeatParams=null;this.V=!1;this.B=new g.UV(1E3,6E4,1);this.sequenceNumber=0;this.offlineSlate=null;this.C=new g.rI(void 0);this.attestationResponse=Promise.resolve(void 0);this.U=Promise.resolve(void 0);this.utcOffsetMinutes=-(new Q6).getTimezoneOffset();this.X=new g.fg(this);g.Q(this,this.Y);g.Q(this,this.X);v1q(this);BbP(this);this.X.T6(b,"heartbeatparams",this.bS);this.X.T6(b,"presentingplayerstatechange",this.o1);this.X.T6(b,"videoplayerreset",this.eL);this.X.T6(b,g.ca("heartbeat"),
this.onCueRangeEnter);this.V&&this.G&&HnK(this,void 0,this.G);var h=new g.Pa(ue(this,!0),0x7ffffffffffff,{priority:1,namespace:"heartbeat"}),K=new g.Pa(0x8000000000000,0x8000000000000,{id:"stream_end",priority:1,namespace:"heartbeat"});b.Qk([h,K]);qQH(this)},qQH=function(b){var R=b.getVideoData();
!R.J("use_rta_for_player")&&R.n6&&(R=R.botguardData)&&g.iC(R,b.player.W())},dmP=function(b){var R,h;
return g.$z(function(K){if(K.Y==1)return K.G(g.B8(),2);if(!K.X)return b.sequenceNumber>=3?K.return({error:"ATTESTATION_ERROR_VM_INTERNAL_ERROR"}):K.return(void 0);R=b.getVideoData();h={};return K.return(g.v8((h.cpn=R.clientPlaybackNonce,h.encryptedVideoId=R.videoId||"",h),1500))})},v1q=function(b){var R=b.getVideoData();
if(R.n6)if(R.J("use_rta_for_player"))b.attestationResponse=dmP(b);else if(R=new g.Gax(R),g.tk.isInitialized()||b.sequenceNumber>=3){var h=Promise,K=h.resolve,I=null;if(R.videoData.XQ){var N=g.g0P(R);if(N){I={};var p={};N=N.split("&");N=g.T(N);for(var a=N.next();!a.done;a=N.next())a=a.value.split("="),a.length===2&&(p[a[0]]=a[1]);p.r1a&&(I.webResponse=p.r1a);p.r1c&&(I.error=f7T[Number(p.r1c)]);I.challenge=R.videoData.XQ}}b.attestationResponse=K.call(h,I||void 0)}},yb3=function(b){var R=b.getVideoData();
if(!g.Wt(b.getVideoData())||R.a7)return!1;if(R.S){b=R.S.flavor==="playready";var h=R.S.flavor==="widevine"&&R.J("html5_innertube_heartbeats_for_widevine");R=g.zC(R.S)&&R.J("html5_innertube_heartbeats_for_fairplay");return!(b||h||R)}return!0},V6=function(b){if(yb3(b))return!!b.heartbeatParams;
var R=b.getVideoData();return!g.Wt(b.getVideoData())||R.VZ||R.OA?!!R.heartbeatToken:!1},Cb=function(b,R){if(!b.Y.isActive()&&b.N){var h=b.getVideoData();
if(V6(b)||h.isLivePlayback){if(R===void 0)if(b.S)if(b.V)R=7500;else{var K;R=((K=b.heartbeatParams)==null?0:K.interval)?b.heartbeatParams.interval*1E3:b.getVideoData().z_||6E4}else R=1E3;b.Y.start(R)}}},in3=function(b,R,h){R.Ct&&(h=g.A1(h,{internalipoverride:R.Ct}));
var K={cpn:R.clientPlaybackNonce};R.contextParams&&(K.context_params=R.contextParams);R.pR&&(K.kpt=R.pR);h=g.A1(h,K);g.pp(h,{format:"RAW",method:"GET",timeout:3E4,onSuccess:function(I){if(!b.Y.isActive()&&Mo(b)){b.B.reset();b.sequenceNumber++;I=I.responseText;var N=tqw(I);if(N){b.player.Sn("onHeartbeat",N);var p=N.status==="ok"?N.stop_heartbeat?2:0:N.status==="stop"?1:N.status==="live_stream_offline"?0:-1}else p=(p=I.match(jyT))?p[1]==="0"?0:1:-1;Abq(b,void 0,N,I,p)}},
onError:function(I){Mo(b)&&rf(b,!0,"net-"+I.status)},
onTimeout:function(){Mo(b)&&rf(b,!0,"timeout")},
withCredentials:!0})},a7w=function(b){var R,h;
g.$z(function(K){R=b.player.W();h=b.getVideoData();if(!Mo(b))return K.return();if(yb3(b))return zkx(b,R,h),K.aH(0);v1q(b);return K.G(UmT(b,R,h),0)})},zkx=function(b,R,h){var K;
if((K=b.heartbeatParams)!=null&&K.url){var I=g.A1(b.heartbeatParams.url,{request_id:g.AF()});h.U&&(I=g.A1(I,{vvt:h.U}),h.mdxEnvironment&&(I=g.A1(I,{mdx_environment:h.mdxEnvironment})));g.i9(R,h.oauthToken).then(function(N){N&&(I=g.A1(I,{access_token:N}));in3(b,h,I)})}},Mo=function(b){var R=b.getVideoData();
return b.player.getPresentingPlayerType()===3||!b.player.W().experiments.nz().G.s9(g.IF3)&&g.u(b.player.getPlayerStateObject(b.getPlayerType()),4)?!1:V6(b)||R.isLivePlayback?!0:(Lb(b),!1)},UmT=function(b,R,h){var K,I,N,p,a,v,B,H,q,f,d,y,U,n,J,Y,x,c,C,V;
return g.$z(function(w){if(w.Y==1)return K="player/heartbeat",N={videoId:h.videoId,sequenceNumber:b.sequenceNumber,heartbeatServerData:(I=b.X5)!=null?I:h.heartbeatServerData},b.U=b.attestationResponse,h.n6?w.G(b.U,3):w.aH(2);w.Y!=2&&(N.attestationResponse=w.X);p=g.wX(h);v=(a=p.client)!=null?a:{};v.utcOffsetMinutes=b.utcOffsetMinutes;N.context=p;N.cpn=h.clientPlaybackNonce;if(B=typeof Intl!=="undefined"?(new Intl.DateTimeFormat).resolvedOptions().timeZone:null)v.timeZone=B;H={heartbeatChecks:[]};if(q=
h.getPlayerResponse())h.heartbeatToken&&(N.heartbeatToken=h.heartbeatToken),(f=q.playabilityStatus)&&(d=f.liveStreamability)&&d.liveStreamabilityRenderer&&H.heartbeatChecks.push("HEARTBEAT_CHECK_TYPE_LIVE_STREAM_STATUS");h.heartbeatToken&&H.heartbeatChecks.push("HEARTBEAT_CHECK_TYPE_YPC");g.tP(R)&&(H.heartbeatChecks.push("HEARTBEAT_CHECK_TYPE_UNPLUGGED"),y=GOT(b),U={},y!==null&&(U.clientPlayerPositionUtcMillis=y),J=(n=b.player.sW())==null?void 0:g.sf(n),x=((Y=J)==null?void 0:Y.FF())||0,x>0&&(U.freePreviewWatchedDuration=
{seconds:""+x}),H.unpluggedParams=U);N.heartbeatRequestParams=H;h.isLivePlayback?(c=GOT(b),c!==null&&(N.playbackState||(N.playbackState={}),N.playbackState.playbackPosition={utcTimeMillis:c})):R.J("enable_heartbeat_vod_playback_position")&&(C=g1x(b),C!==null&&(N.playbackState||(N.playbackState={}),N.playbackState.playbackPosition={streamTimeMillis:C}));b.player.G6("heartbeatRequest",N);V={timeout:3E4,onSuccess:function(RK){if(!b.Y.isActive()&&Mo(b)){var $B=b.getVideoData(),Ns=$B.n6&&b.U==null,We;
$B.n6=!((We=RK.heartbeatAttestationConfig)==null||!We.requiresAttestation)||Ns;Ns=RK.playabilityStatus;We=JSON.stringify(Ns)||"{}";RK.authenticationMismatch&&b.player.L("authshear",{});var bT=-1;var E3=RK.playabilityStatus;E3&&(b.player.Sn("onHeartbeat",E3),E3.status==="OK"?bT=RK.stopHeartbeat?2:0:E3.status==="UNPLAYABLE"?bT=1:E3.status==="LIVE_STREAM_OFFLINE"&&(bT=0));b.sequenceNumber&&bT===-1||b.B.reset();b.sequenceNumber++;RK.heartbeatServerData&&(b.X5=RK.heartbeatServerData);$B.Wo=RK;(E3=RK.playerCueRangeSet)&&
g.Im($B,E3);RK.playerCueRanges&&RK.playerCueRanges.length>0&&($B.cueRanges=RK.playerCueRanges);var ec,Pp;((ec=RK.progressBarConfig)==null?0:ec.progressBarStartPosition)&&((Pp=RK.progressBarConfig)==null?0:Pp.progressBarEndPosition)&&($B.progressBarStartPosition=RK.progressBarConfig.progressBarStartPosition,$B.progressBarEndPosition=RK.progressBarConfig.progressBarEndPosition);$B.compositeLiveIngestionOffsetToken=RK.compositeLiveIngestionOffsetToken;RK.compositeLiveStatusToken!==$B.compositeLiveStatusToken&&
($B.compositeLiveStatusToken=RK.compositeLiveStatusToken);$B.heartbeatLoggingToken=RK.heartbeatLoggingToken;$B.G6("dataupdated");Abq(b,RK,Ns,We,bT)}},
onError:function(RK){Mo(b)&&rf(b,!0,"net-"+RK.status)},
onTimeout:function(){Mo(b)&&rf(b,!0,"timeout")}};
g.i9(R,g.xp(h)).then(function(RK){RK&&(V.CJ="Bearer "+RK);g.wI(b.C,K,N,V)});
w.B()})},Abq=function(b,R,h,K,I){I===-1?(h="decode "+g.Jx(K,3),rf(b,!1,h)):I===2?(Lb(b),b.S=!0):(b.j=0,b.Y.stop(),I===1?(b.S=!1,h&&h.errorCode==="PLAYABILITY_ERROR_CODE_EMBARGOED"&&b.player.Wr(!0),I="pe."+(h==null?void 0:h.errorCode)+";ps."+(h==null?void 0:h.status),b.player.xs("heartbeat.stop",2,b.lj(K),I),g.Vp("heartbeatActionPlayerHalted",W1D(h)),(R==null?0:R.videoTransitionEndpoint)&&h&&(R=R.videoTransitionEndpoint,(K=g.m(R,g.N8))&&wf(b,K,h,{itct:R==null?void 0:R.clickTrackingParams}))):(b.S=
!0,K=0,b.V&&h&&(K=HnK(b,R,h),b.player.G6("livestatedata",h)),K?Cb(b,K):Cb(b)))},HnK=function(b,R,h){var K=h.liveStreamability&&h.liveStreamability.liveStreamabilityRenderer,I=!(!K||!(K.switchStreamsImmediately||K.transitionTiming&&K.transitionTiming==="STREAM_TRANSITION_TIMING_IMMEDIATELY"));
R=SQ2(R,K);var N=b.getVideoData(),p=b.player.getPlayerStateObject(b.getPlayerType()),a=p.isPlaying()&&!g.JU(N)&&!b.player.isAtLiveHead(b.getPlayerType());if(N.W().XM()){var v,B=((v=b.player.UW())==null?void 0:v.zy())||{};B.status=h.status||"";B.dvr=""+ +a;B["switch"]=""+ +I;B.ended=""+ +!(!K||!K.displayEndscreen);b.player.L("heartbeat",B)}v=K&&K.broadcastId;B=b.G&&b.G.liveStreamability&&b.G.liveStreamability.liveStreamabilityRenderer&&b.G.liveStreamability.liveStreamabilityRenderer.broadcastId;var H=
v!==B&&v!=null;H&&b.player.L("lbidh",{broadcastId:v},!0);if(g.HC(N.W())&&K&&K.streamTransitionEndpoint){var q,f=((q=g.m(K.streamTransitionEndpoint,g.bE))==null?void 0:q.commands)||[];q=g.T(f);for(f=q.next();!f.done;f=q.next()){var d=void 0;if(((d=g.m(f.value,g.Ox))==null?void 0:d.signal)==="RELOAD_PLAYER"){b.player.xs("qoe.restart",1,void 0,"sa.reload","7");break}}}q=b.player.J("always_cache_redirect_endpoint");if(a&&!I&&!q)return R;f=K&&K.streamTransitionEndpoint&&g.m(K.streamTransitionEndpoint,
g.N8);d=K&&K.transitionTiming;if(d==="STREAM_TRANSITION_TIMING_AT_STREAM_END")b.getVideoData().transitionEndpointAtEndOfStream=f;else if(q&&!f&&b.getVideoData().transitionEndpointAtEndOfStream)b.getVideoData().transitionEndpointAtEndOfStream=void 0;else if(!q&&f&&wf(b,f,h))return R;if(a&&!I&&q||q&&f&&(d==="STREAM_TRANSITION_TIMING_IMMEDIATELY"||d==="STREAM_TRANSITION_TIMING_UNSPECIFIED")&&wf(b,f,h))return R;if(h.status.toUpperCase()==="OK"){if(!g.TL(N)||H){var y={video_id:N.videoId};N.QG&&(y.is_live_destination=
"1");y.disable_watch_next=!0;y.raw_watch_next_response=N.getWatchNextResponse();y.autonav_state=N.autonavState;y.oauth_token=N.oauthToken;y.DL=N.DL;N.Tj&&(y.vss_credentials_token=N.Tj,y.vss_credentials_token_type=N.wR);N.U&&(y.vvt=N.U);K=void 0;g.TL(N)?H&&(K=new cf("broadcastIdChanged",B+","+v),Fe("HEARTBEAT_ACTION_TRANSITION_REASON_BROADCAST_ID_CHANGED",h)):(v&&(K=new cf("formatsReceived",""+v)),Fe("HEARTBEAT_ACTION_TRANSITION_REASON_LIVE_STREAM_WENT_ONLINE",h));H&&b.player.L("lbidr",{broadcastId:v});
b.player.loadVideoByPlayerVars(y,void 0,void 0,void 0,K);return R}b.player.F9("heartbeat",b.getPlayerType())}K&&K.displayEndscreen&&(b.offlineSlate?(b=b.offlineSlate,b.N=!0,b.X&&b.api.pP()):p.isBuffering()&&(N=((y=b.player.UW())==null?void 0:y.zy())||{},b.player.L("hbse",N,!0),b.player.pP(!0,"h"),b.player.Sn("onLiveMediaEnded",h)));return R},SQ2=function(b,R){return(b=Number(b==null?void 0:b.pollDelayMs))?b:(R=Number(R==null?void 0:R.pollDelayMs))?R:0},rf=function(b,R,h){if(!b.Y.isActive()){b.Y.stop();
b.j++;var K=R?"heartbeat.net":"heartbeat.servererror";var I=b.getVideoData();if(I.S1||R&&!g.Wt(b.getVideoData())&&!V6(b)&&I.isLivePlayback)I=!1;else{var N,p;((p=b.heartbeatParams)==null?0:p.retries)?N=b.heartbeatParams.retries:N=I.VJ||5;I=b.j>=N}I?(g.Vp("heartbeatActionPlayerHalted",R?{enforcedPolicyToHaltOnNetworkFailure:!0}:W1D()),(R=b.getVideoData())&&R.isLivePlayback?b.player.xs(K,1,"Video playback interrupted. Please try again.",h):b.player.xs(K,1,"Sorry, there was an error licensing this video.",
h)):(Cb(b,b.B.getValue()),g.Gg(b.B))}},W1D=function(b){var R={enforcedPolicyToHaltOnNetworkFailure:!1};
b&&(R.serializedServerContext=b.additionalLoggingData);return R},Fe=function(b,R){b={trigger:"HEARTBEAT_ACTION_TRIGGER_IMMEDIATE",
reason:b};R&&(b.serializedServerContext=R.additionalLoggingData);g.Vp("heartbeatActionPlayerTransitioned",b)},Lb=function(b){b.j=0;
b.Y.stop();b.S=!1;b.sequenceNumber=0},BbP=function(b){var R=b.getVideoData(),h=b.player.W();
if(R.isLivePlayback)if(g.Qj(h.Y)){b.V=!0;b.N=!0;if(!g.HC(h)||g.tP(h))b.offlineSlate=new Pf(b.player),g.Q(b,b.offlineSlate),g.fB(b.player,b.offlineSlate.element,4);(R=R.getPlayerResponse())&&R.playabilityStatus&&(b.G=R.playabilityStatus);var K;((K=b.G)==null?void 0:K.status)!=="UNPLAYABLE"&&(b.G?(K=SQ2(void 0,b.G.liveStreamability&&b.G.liveStreamability.liveStreamabilityRenderer))?Cb(b,K):Cb(b,7500):Cb(b,ue(b,!0)))}else b.player.xs("html5.unsupportedlive",2,"HTML5_NO_AVAILABLE_FORMATS_FALLBACK","nolive.1");
else g.TK(R.WI,"heartbeat")&&b.player.F9("heartbeat",b.getPlayerType())},wf=function(b,R,h,K){var I=R&&R.videoId;
return I?(b.player.nB(I,Object.assign({},{autonav:"1"},K||{}),void 0,!0,!0,R,g.xp(b.getVideoData())),Fe("HEARTBEAT_ACTION_TRANSITION_REASON_HAS_NEW_STREAM_TRANSITION_ENDPOINT",h),!0):!1},GOT=function(b){return(b=b.player.getProgressState(b.getPlayerType()).ingestionTime)&&isFinite(b)?""+Math.floor(b*1E3):null},g1x=function(b){return(b=b.player.getCurrentTime(b.getPlayerType()))&&isFinite(b)?""+Math.floor(b*1E3):null},ue=function(b,R){R=R===void 0?!1:R;
b=b.getVideoData();return b.J("html5_use_server_init_heartbeat_delay")?isNaN(b.z_)?15E3:b.z_:R?1E3:2E3},tqw=function(b){try{var R=JSON.parse(b);
return R!=null?R:void 0}catch(h){}};
g.Ba.prototype.pP=g.IK(10,function(b,R){this.app.pP(b,1,R)});
g.u3.prototype.pP=g.IK(9,function(b,R,h){g.Mk(this,{playerType:R===void 0?1:R}).aR(b,void 0,h)});
var n1e={ERAS:["BC","AD"],ERANAMES:["Before Christ","Anno Domini"],NARROWMONTHS:"JFMAMJJASOND".split(""),STANDALONENARROWMONTHS:"JFMAMJJASOND".split(""),MONTHS:"January February March April May June July August September October November December".split(" "),STANDALONEMONTHS:"January February March April May June July August September October November December".split(" "),SHORTMONTHS:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONESHORTMONTHS:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
WEEKDAYS:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),STANDALONEWEEKDAYS:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTWEEKDAYS:"Sun Mon Tue Wed Thu Fri Sat".split(" "),STANDALONESHORTWEEKDAYS:"Sun Mon Tue Wed Thu Fri Sat".split(" "),NARROWWEEKDAYS:"SMTWTFS".split(""),STANDALONENARROWWEEKDAYS:"SMTWTFS".split(""),SHORTQUARTERS:["Q1","Q2","Q3","Q4"],QUARTERS:["1st quarter","2nd quarter","3rd quarter","4th quarter"],AMPMS:["AM","PM"],DATEFORMATS:["EEEE, MMMM d, y",
"MMMM d, y","MMM d, y","M/d/yy"],TIMEFORMATS:["h:mm:ss\u202fa zzzz","h:mm:ss\u202fa z","h:mm:ss\u202fa","h:mm\u202fa"],DATETIMEFORMATS:["{1} 'at' {0}","{1} 'at' {0}","{1}, {0}","{1}, {0}"],FIRSTDAYOFWEEK:6,WEEKENDRANGE:[5,6],FIRSTWEEKCUTOFFDAY:5},oW=n1e;oW=n1e;
var f7T=["ATTESTATION_ERROR_UNKNOWN","ATTESTATION_ERROR_VM_NOT_INITIALIZED","ATTESTATION_ERROR_VM_NO_RESPONSE","ATTESTATION_ERROR_VM_TIMEOUT","ATTESTATION_ERROR_VM_INTERNAL_ERROR"],E1H={300:"STREAMING_DEVICES_QUOTA_PER_24H_EXCEEDED",301:"ALREADY_PINNED_ON_A_DEVICE",303:"STOPPED_BY_ANOTHER_PLAYBACK",304:"TOO_MANY_STREAMS_PER_USER",305:"TOO_MANY_STREAMS_PER_ENTITLEMENT",400:"VIDEO_NOT_FOUND",401:"GEO_FAILURE",402:"STREAMING_NOT_ALLOWED",403:"UNSUPPORTED_DEVICE",405:"VIDEO_FORBIDDEN",500:"PURCHASE_NOT_FOUND",
501:"RENTAL_EXPIRED",502:"PURCHASE_REFUNDED",5E3:"BAD_REQUEST",5001:"CGI_PARAMS_MISSING",5002:"CGI_PARAMS_MALFORMED",5100:"AUTHENTICATION_MISSING",5101:"AUTHENTICATION_MALFORMED",5102:"AUTHENTICATION_EXPIRED",5200:"CAST_TOKEN_MALFORMED",5201:"CAST_TOKEN_EXPIRED",5202:"CAST_TOKEN_FAILED",5203:"CAST_SESSION_VIDEO_MISMATCHED",5204:"CAST_SESSION_DEVICE_MISMATCHED",6E3:"INVALID_DRM_MESSAGE",7E3:"SERVER_ERROR",8E3:"RETRYABLE_ERROR"};g.A=Q6.prototype;g.A.B6=oW.FIRSTDAYOFWEEK;g.A.Ap=oW.FIRSTWEEKCUTOFFDAY;
g.A.clone=function(){var b=new Q6(this.date);b.B6=this.B6;b.Ap=this.Ap;return b};
g.A.getFullYear=function(){return this.date.getFullYear()};
g.A.getYear=function(){return this.getFullYear()};
g.A.getMonth=function(){return this.date.getMonth()};
g.A.getDate=function(){return this.date.getDate()};
g.A.getTime=function(){return this.date.getTime()};
g.A.getDay=function(){return this.date.getDay()};
g.A.getUTCFullYear=function(){return this.date.getUTCFullYear()};
g.A.getUTCMonth=function(){return this.date.getUTCMonth()};
g.A.getUTCDate=function(){return this.date.getUTCDate()};
g.A.getUTCDay=function(){return this.date.getDay()};
g.A.getUTCHours=function(){return this.date.getUTCHours()};
g.A.getUTCMinutes=function(){return this.date.getUTCMinutes()};
g.A.getTimezoneOffset=function(){return this.date.getTimezoneOffset()};
g.A.set=function(b){this.date=new Date(b.getFullYear(),b.getMonth(),b.getDate())};
g.A.setFullYear=function(b){this.date.setFullYear(b)};
g.A.setYear=function(b){this.setFullYear(b)};
g.A.setMonth=function(b){this.date.setMonth(b)};
g.A.setDate=function(b){this.date.setDate(b)};
g.A.setTime=function(b){this.date.setTime(b)};
g.A.setUTCFullYear=function(b){this.date.setUTCFullYear(b)};
g.A.setUTCMonth=function(b){this.date.setUTCMonth(b)};
g.A.setUTCDate=function(b){this.date.setUTCDate(b)};
g.A.add=function(b){if(b.years||b.months){var R=this.getMonth()+b.months+b.years*12,h=this.getYear()+Math.floor(R/12);R%=12;R<0&&(R+=12);a:{switch(R){case 1:var K=h%4!=0||h%100==0&&h%400!=0?28:29;break a;case 5:case 8:case 10:case 3:K=30;break a}K=31}K=Math.min(K,this.getDate());this.setDate(1);this.setFullYear(h);this.setMonth(R);this.setDate(K)}b.days&&(h=this.getYear(),R=h>=0&&h<=99?-1900:0,b=new Date((new Date(h,this.getMonth(),this.getDate(),12)).getTime()+b.days*864E5),this.setDate(1),this.setFullYear(b.getFullYear()+
R),this.setMonth(b.getMonth()),this.setDate(b.getDate()),O_(this,b.getDate()))};
g.A.equals=function(b){return!(!b||this.getYear()!=b.getYear()||this.getMonth()!=b.getMonth()||this.getDate()!=b.getDate())};
g.A.toString=function(){var b=this.getFullYear(),R=b<0?"-":b>=1E4?"+":"";return[R+ej(Math.abs(b),R?6:4),ej(this.getMonth()+1,2),ej(this.getDate(),2)].join("")+""};
g.A.valueOf=function(){return this.date.valueOf()};var $mx=new g.K5("addUpcomingEventReminderEndpoint");var I7B=new g.K5("removeUpcomingEventReminderEndpoint");g.E(xe,g.S4);xe.prototype.V=function(){if(this.toggleButtonRenderer){var b=this.toggleButtonRenderer;b.isToggled?pRw(this,b.toggledServiceEndpoint):pRw(this,b.defaultServiceEndpoint);b.isToggled=!b.isToggled;m0(this)}};g.E(Pf,g.S4);g.A=Pf.prototype;g.A.getPlayerType=function(){if(this.api.getPresentingPlayerType()===8)return 1};
g.A.getVideoData=function(){return this.api.getVideoData({playerType:this.getPlayerType()})};
g.A.Hr=function(b){var R,h,K=b==null?void 0:(R=b.liveStreamability)==null?void 0:(h=R.liveStreamabilityRenderer)==null?void 0:h.offlineSlate;if(K){this.Y=b;R=K.liveStreamOfflineSlateRenderer;R.canShowCountdown?this.Jn():ZD(this,R);var I,N,p,a;if(h=b==null?void 0:(I=b.liveStreamability)==null?void 0:(N=I.liveStreamabilityRenderer)==null?void 0:(p=N.offlineSlate)==null?void 0:(a=p.liveStreamOfflineSlateRenderer)==null?void 0:a.thumbnail){I=0;N=null;p=h.thumbnails;for(a=0;a<p.length;a++)p[a].width>I&&
(I=p[a].width||0,N=p[a].url);N&&(this.background.style.backgroundImage="url("+N+")")}else this.background.style.backgroundImage="";R.actionButtons?(this.G||(this.G=new xe(this.api),this.G.oH(this.xZ("ytp-offline-slate-buttons")),g.Q(this,this.G)),K1x(this.G,R.actionButtons&&R.actionButtons[0])):this.G&&K1x(this.G,null);this.Y=b}else this.Y=null;this.rS()};
g.A.rS=function(b){if(this.api.getPresentingPlayerType()===8)var R=!0;else{var h=this.api.getPlayerStateObject(),K=this.getVideoData();R=K.isLivePlayback&&(h.isBuffering()||g.u(h,2)||g.u(h,64));var I=K.autonavState===2&&g.u(h,2);h=h.isPlaying()&&!g.JU(K)&&!this.api.isAtLiveHead(void 0,!0);R=R&&!h&&!I}R&&this.Y?this.X?(b==null?0:g.Px(b,2))&&!this.getVideoData().Os&&(g.i6(this.element,"ytp-offline-slate-collapsed"),this.S.stop(),g.i6(this.V,"ytp-offline-slate-bar-fade"),this.B.start()):(this.show(),
this.S.start(),this.api.G6("offlineslatestatechange"),this.N&&this.api.pP()):this.X&&(this.hide(),this.api.G6("offlineslatestatechange"))};
g.A.Jn=function(){var b,R,h,K,I=(b=this.Y)==null?void 0:(R=b.liveStreamability)==null?void 0:(h=R.liveStreamabilityRenderer)==null?void 0:(K=h.offlineSlate)==null?void 0:K.liveStreamOfflineSlateRenderer;I&&(b=Math.floor(g.J3()/1E3),R=I.canShowCountdown&&Number(I.scheduledStartTime),!R||R<=b?(ZD(this,I),this.countdownTimer.stop()):(ZD(this,I,g.KzK(R-b)),g.vc(this.countdownTimer)))};
g.A.yX=function(){this.countdownTimer.dispose();this.countdownTimer=null;g.S4.prototype.yX.call(this)};cf.prototype.Y=function(b){return this.trigger&&b.trigger?this.module===b.module&&this.trigger===b.trigger&&this.G===b.G:!1};
cf.prototype.isExpired=function(){return(0,g.P)()-this.X>6E4};
cf.prototype.toString=function(){return this.module+":"+this.trigger+":"+this.G};g.E(Xe,g.XK);g.A=Xe.prototype;g.A.yX=function(){Lb(this);this.player.Fy("heartbeat");g.XK.prototype.yX.call(this)};
g.A.onCueRangeEnter=function(){this.N=!0;Cb(this,ue(this))};
g.A.bS=function(b){this.heartbeatParams=b;Cb(this,ue(this))};
g.A.o1=function(b){var R;this.player.getPresentingPlayerType()!==8&&((R=this.G)==null?void 0:R.status)!=="UNPLAYABLE"&&(g.u(b.state,2)||g.u(b.state,64)?(Lb(this),this.V&&(this.N=!0,Cb(this,ue(this,!0)))):(R=this.player.W().experiments.nz().G.s9(g.IF3),(g.u(b.state,1)||g.u(b.state,8)||R&&g.u(b.state,4))&&Cb(this,ue(this))))};
g.A.eL=function(){this.player.getPresentingPlayerType()!==3&&Cb(this,ue(this))};
g.A.getPlayerType=function(){if(this.player.getPresentingPlayerType()===8)return 1};
g.A.getVideoData=function(){return this.player.getVideoData({playerType:this.getPlayerType()})};
g.A.cB=function(b){switch(b){case 4:case 3:return!1}return!0};
g.A.lj=function(b){var R="LICENSE",h=tqw(b);if(h)return h.reason||g.dh[R]||"";if(b=b.match(jyT))if(b=Number(b[1]))R=(R=E1H[b.toString()])?R:"LICENSE";return g.dh[R]||""};
g.A.fA=function(){return!!this.offlineSlate&&this.offlineSlate.X};
var jyT=/^GLS\/1.0 (\d+) (\w+).*?\r\n\r\n([\S\s]*)$/;g.uH("heartbeat",Xe);})(_yt_player);
